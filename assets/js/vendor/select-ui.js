class SelectUI{constructor(e,t){this.$elements=document.querySelectorAll(e),this.options=t,this.selector=e,this.selectedId=t.selectedId,this.selectedDataProp=t.selectedDataProp,this.data=t.data||[],this.placeholder=t.placeholder||"Placeholder по умолч.",this.errorText=t.errorText||"",this.nameSelect=t.nameSelect||"select",this.fakeSelect=document.querySelector(".select-ui-fake"),this.onSelect=t.onSelect,this.selectChildren=t.selectChildren,this.valueInput="",this.arrValues=[],this.render()}render(){this.$elements.forEach(e=>{this.selectChildren?(this.parent=this.options.parent,this.countSelectChildren=this.options.countSelectChildren):(e.innerHTML=this.getTemplate(),this.hideFakeSelect(),this.setup(e))}),this.selectChildren&&this.renderChildrenSelects()}renderChildrenSelects=()=>{let t=this.parent.nextElementSibling;t.innerHTML="";for(let e=0;e<this.countSelectChildren;e++){t.insertAdjacentHTML("beforeend",`<div class="select-children__item" data-type="num">
                <div class="select-ui-children select-ui-children-${e+1}"></div>
            </div>`);new SelectUI(".select-ui-children-"+(e+1),{placeholder:e+1+" ребенок",errorText:"Выберите возраст ребёнка",nameSelect:"select-children-"+(e+1),selectedId:"1",data:[{id:"1",value:"до 1 года",dataProp:"0"},{id:"2",value:"1 год",dataProp:"1"},{id:"3",value:"2 года",dataProp:"2"},{id:"4",value:"3 года",dataProp:"3"},{id:"5",value:"4 года",dataProp:"4"},{id:"6",value:"5 лет",dataProp:"5"},{id:"7",value:"6 лет",dataProp:"6"},{id:"8",value:"7 лет",dataProp:"7"},{id:"9",value:"8 лет",dataProp:"8"},{id:"10",value:"9 лет",dataProp:"9"},{id:"11",value:"10 лет",dataProp:"10"},{id:"12",value:"11 лет",dataProp:"11"},{id:"13",value:"12 лет",dataProp:"12"},{id:"14",value:"13 лет",dataProp:"13"},{id:"15",value:"14 лет",dataProp:"14"},{id:"16",value:"15 лет",dataProp:"15"},{id:"17",value:"16 лет",dataProp:"16"},{id:"18",value:"17 лет",dataProp:"17"}]})}};setup(e){this.clickHandler=this.clickHandler.bind(this),e.addEventListener("click",this.clickHandler.bind(null,e))}getTemplate=()=>{let e="";return this.valueInput=this.placeholder,(this.selectedDataProp||this.selectedId)&&(void 0===this.selectedDataProp?this.arrValues=this.data.filter(e=>e.id===this.selectedId):this.arrValues=this.data.filter(e=>e.id===this.selectedDataProp),e="selected",this.arrValues[0]&&(this.valueInput=this.arrValues[0].value)),`
            <div class="select-ui__backdrop" data-type="backdrop"></div>
            <div class="select-ui__input ${e}" data-type="input">
                <span class="select-ui__input-name form-item__name" data-type="input">${this.placeholder}</span>
                <span data-type="value">${this.valueInput}</span>
            </div>
            <div class="select-ui__dropdown">
                <ul class="select-ui__list">
                    ${this.mapItems().join("")}
                </ul>
            </div>
            <select class="select-ui__hidden-select" name="${this.nameSelect}" required>
                <option value="">Выберите пункт</option>
                ${this.mapOptionsSelect().join("")}
            </select>
        `};mapItems=()=>{return this.data.map(e=>{let t="";return void 0===this.selectedDataProp?e.id===this.selectedId&&(t="selected"):e.dataProp===this.selectedDataProp&&(t="selected"),`
                <li class="select-ui__item ${t}" data-type="item" data-id=${e.id} data-prop="${e.dataProp}">${e.value}</li>
            `})};mapOptionsSelect=()=>{return this.data.map(e=>{let t="";return void 0===this.selectedDataProp?e.id===this.selectedId&&(t="selected"):e.dataProp===this.selectedDataProp&&(t="selected"),`
                <option class="select-ui__hidden-option" value="${e.value}" ${t}>${e.value}</option>
            `})};clickHandler(e,t){var a,i=t.target.dataset["type"];"input"===i||"value"===i?this.toggle(e):"item"===i?(a=t.target.dataset.id,t=t.target.dataset.prop,this.select(a,t,e)):"backdrop"===i&&this.close(e)}select(e,t,a){this.selectedId=e,this.selectedDataProp=t,this.$value=a.querySelector('[data-type="value"]'),this.$input=a.querySelector(".select-ui__input"),this.$inputName=this.$input.querySelector(".form-item__name"),this.$hiddenSelect=a.querySelector(".select-ui__hidden-select"),this.$value.innerHTML=this.current.value,a.querySelectorAll('[data-type="item"]').forEach(e=>{e.classList.remove("selected")}),a.querySelector(`[data-id="${e}"]`).classList.add("selected"),this.$input.classList.add("selected"),this.$hiddenSelect.value=this.current.value,this.onSelect&&this.onSelect(this.current),this.close(a)}get current(){return this.data.find(e=>e.id===this.selectedId)}toggle(e){this.getIsOpen(e)?this.close(e):this.open(e)}getIsOpen(e){return e.classList.contains("open")}open(e){e.classList.add("open")}close(e){e.classList.remove("open")}destroy(e){e.removeEventListener("click",this.clickHandler),e.innerHTML=""}hideFakeSelect(){null!==this.fakeSelect&&this.fakeSelect.remove()}}